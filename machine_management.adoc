= Machine management

toc::[]


## Applying autoscaling to an {product-title} cluster

[source,terminal]
----
$ oc create -f <filename>.yaml 
----


[source,terminal]
----
$ oc create -f <filename>.yaml 
----

## Creating infrastructure machine sets

[source,terminal]
----
$ oc create -f <file_name>.yaml
----


[source,terminal]
----
$ oc adm taint nodes <node_name> <key>:<effect>
----


[source,terminal]
----
$ oc adm taint nodes node1 node-role.kubernetes.io/infra:NoSchedule
----


[source,terminal]
----
$ oc edit ingresscontroller default -n openshift-ingress-operator
----


[source,terminal]
----
$ oc edit configs.imageregistry.operator.openshift.io cluster
----


[source,terminal]
----
$ oc create -f cluster-monitoring-configmap.yaml
----


[source,terminal]
----
$ oc delete pod -n openshift-monitoring <pod>
----


[source,terminal]
----
$ oc edit ClusterLogging instance
----

## Creating a machine set on AWS

[source,terminal]
----
$ oc create -f <file_name>.yaml
----

## Creating a machine set on Azure

[source,terminal]
----
$ oc create -f <file_name>.yaml
----

## Creating a machine set on GCP

[source,terminal]
----
$ oc create -f <file_name>.yaml
----

## Creating a machine set on OpenStack

[source,terminal]
----
$ oc create -f <file_name>.yaml
----

## Creating a machine set on RHV

[source,terminal]
----
$ oc create -f <file_name>.yaml
----

## Creating a machine set on vSphere

[source,terminal]
----
$ oc create -f <file_name>.yaml
----

## Deleting a machine

[source,terminal]
----
$ oc delete machine <machine> -n openshift-machine-api
----

## Deploying machine health checks

[source,terminal]
----
$ oc apply -f healthcheck.yml
----

## Manually scaling a machine set

[source,terminal]
----
$ oc scale --replicas=2 machineset <machineset> -n openshift-machine-api
----


[source,terminal]
----
$ oc edit machineset <machineset> -n openshift-machine-api
----

## Modifying a machine set

[source,terminal]
----
$ oc edit machineset <machineset> -n openshift-machine-api
----


[source,terminal]
----
$ oc scale --replicas=0 machineset <machineset> -n openshift-machine-api
----


[source,terminal]
----
$ oc edit machineset <machineset> -n openshift-machine-api
----


[source,terminal]
----
$ oc scale --replicas=2 machineset <machineset> -n openshift-machine-api
----


[source,terminal]
----
$ oc edit machineset <machineset> -n openshift-machine-api
----

## Adding compute machines to AWS by using CloudFormation templates

[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----


[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----

## Adding compute machines to bare metal

[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----


[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----

## Adding RHEL compute machines to an {product-title} cluster

[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----


[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----


[source,terminal]
----
$ oc adm cordon <node_name> 
----


[source,terminal]
----
$ oc adm drain <node_name> --force --delete-local-data --ignore-daemonsets 
----


[source,terminal]
----
$ oc delete nodes <node_name> 
----

## Adding compute machines to vSphere

[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----


[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----

## Adding more RHEL compute machines to an {product-title} cluster

[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----


[source,terminal]
----
$ oc adm certificate approve <csr_name> 
----
